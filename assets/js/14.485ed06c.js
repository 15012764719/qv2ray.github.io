(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{262:function(t,e,a){"use strict";a.r(e);var s=a(17),o=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"step-4-configuring-browsers-software-to-use-qv2ray"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step-4-configuring-browsers-software-to-use-qv2ray"}},[t._v("#")]),t._v(" Step 4: Configuring Browsers / Software to Use Qv2ray")]),t._v(" "),a("p",[t._v("Configurations differs from platform to platform.")]),t._v(" "),a("h2",{attrs:{id:"linux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[t._v("#")]),t._v(" Linux")]),t._v(" "),a("h3",{attrs:{id:"configure-through-environment-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-through-environment-variables"}},[t._v("#")]),t._v(" Configure through Environment Variables")]),t._v(" "),a("p",[t._v("Many a program in Linux, for example, "),a("code",[t._v("curl")]),t._v(" and "),a("code",[t._v("wget")]),t._v(", will use the proxies given by "),a("code",[t._v("<PROTOCOL>_PROXY")]),t._v(" environment variable.")]),t._v(" "),a("p",[t._v("Here is a configuration example:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change the host and port according to Qv2ray inbound configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HTTP_PROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:8000"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HTTPS_PROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://127.0.0.1:8000"')]),t._v("\n")])])]),a("p",[t._v("If authentication is enabled in Qv2ray, use the following settings:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Change user/pass according to your configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HTTP_PROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://user:pass@127.0.0.1:8000"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HTTPS_PROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://user:pass@127.0.0.1:8000"')]),t._v("\n")])])]),a("p",[t._v("Note that if there is a special character in your username or password, you need to encode it. Here's a quick reference:")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[a("code",[t._v("!")])]),t._v(" "),a("th",[a("code",[t._v("#")])]),t._v(" "),a("th",[a("code",[t._v("$")])]),t._v(" "),a("th",[a("code",[t._v("&")])]),t._v(" "),a("th",[a("code",[t._v("'")])]),t._v(" "),a("th",[a("code",[t._v("(")])]),t._v(" "),a("th",[a("code",[t._v(")")])]),t._v(" "),a("th",[a("code",[t._v("*")])]),t._v(" "),a("th",[a("code",[t._v("+")])]),t._v(" "),a("th",[a("code",[t._v(",")])]),t._v(" "),a("th",[a("code",[t._v("/")])]),t._v(" "),a("th",[a("code",[t._v(":")])]),t._v(" "),a("th",[a("code",[t._v(";")])]),t._v(" "),a("th",[a("code",[t._v("=")])]),t._v(" "),a("th",[a("code",[t._v("?")])]),t._v(" "),a("th",[a("code",[t._v("@")])]),t._v(" "),a("th",[a("code",[t._v("[")])]),t._v(" "),a("th",[a("code",[t._v("]")])])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("%21")])]),t._v(" "),a("td",[a("code",[t._v("%23")])]),t._v(" "),a("td",[a("code",[t._v("%24")])]),t._v(" "),a("td",[a("code",[t._v("%26")])]),t._v(" "),a("td",[a("code",[t._v("%27")])]),t._v(" "),a("td",[a("code",[t._v("%28")])]),t._v(" "),a("td",[a("code",[t._v("%29")])]),t._v(" "),a("td",[a("code",[t._v("%2A")])]),t._v(" "),a("td",[a("code",[t._v("%2B")])]),t._v(" "),a("td",[a("code",[t._v("%2C")])]),t._v(" "),a("td",[a("code",[t._v("%2F")])]),t._v(" "),a("td",[a("code",[t._v("%3A")])]),t._v(" "),a("td",[a("code",[t._v("%3B")])]),t._v(" "),a("td",[a("code",[t._v("%3D")])]),t._v(" "),a("td",[a("code",[t._v("%3F")])]),t._v(" "),a("td",[a("code",[t._v("%40")])]),t._v(" "),a("td",[a("code",[t._v("%5B")])]),t._v(" "),a("td",[a("code",[t._v("%5D")])])])])]),t._v(" "),a("p",[t._v("For programs running in "),a("code",[t._v("sudo")]),t._v(", it is required to configure "),a("code",[t._v("sudo")]),t._v(" to preserve these variables if you do not run "),a("code",[t._v("sudo")]),t._v(" in a shell. Call "),a("code",[t._v("visudo")]),t._v(" with root and add the following line:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Defaults env_keep += "HTTP_PROXY HTTPS_PROXY"\n')])])]),a("p",[t._v("Still, there are some programs who are using their own variables. For example, "),a("code",[t._v("rsync")]),t._v(" uses "),a("code",[t._v("RSYNC_PROXY")]),t._v(" for HTTP proxies:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("RSYNC_PROXY")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("user:pass@127.0.0.1:8000\n")])])]),a("p",[t._v("It is strongly recommended to read the manual of programs that you want to configure proxy with.")]),t._v(" "),a("h3",{attrs:{id:"configure-manually-in-applications"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-manually-in-applications"}},[t._v("#")]),t._v(" Configure Manually in Applications")]),t._v(" "),a("p",[t._v("Some applications support manually configuration of proxies. Taking Firefox as example, you may fill HTTP/SOCKS5 Inbound from Qv2ray into Preferences -> General -> Network -> Manual Proxy Configuration.")]),t._v(" "),a("p",[t._v("Besides, you may use a third-party plugin (for example, SwitchyOmega) to implement a more sophisticated configuration, which may includes further traffic diversion or direct pass.")]),t._v(" "),a("p",[t._v("For Java applications, you may use configure proxies through "),a("code",[t._v("java")]),t._v(". Here's an example:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For HTTP Proxies")]),t._v("\njava -Dhttp.proxyHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 -Dhttp.proxyPort"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v(" -Dhttps.proxyHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 -Dhttps.proxyPort"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("your java command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For SOCKS5 Proxies")]),t._v("\njava -DsocksProxyHost"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1 -DsocksProxyPort"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1088")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("your java command"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("For "),a("code",[t._v("ssh")]),t._v(" or "),a("code",[t._v("scp")]),t._v(", you may configure proxies through "),a("code",[t._v("socat")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" -o "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ProxyCommand=socat - PROXY:localhost:%h:%p,proxyport=8000"')]),t._v(" user@remotehost\n")])])]),a("h3",{attrs:{id:"configure-through-gnome-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-through-gnome-settings"}},[t._v("#")]),t._v(" Configure through GNOME Settings")]),t._v(" "),a("p",[t._v("Currently, automated configuration of proxies for GNOME applications is already supported by Qv2ray. For some applications such as Firefox and Chromium, they will read and obey the proxy configurations in GNOME Settings. Simply restart these applications for the settings to take effect.")]),t._v(" "),a("h3",{attrs:{id:"configure-through-proxychains"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configure-through-proxychains"}},[t._v("#")]),t._v(" Configure through "),a("code",[t._v("proxychains")])]),t._v(" "),a("p",[t._v("For those applications that does not work with the methods above, you may have a try with "),a("code",[t._v("proxychains")]),t._v(", which hijacks functions in "),a("code",[t._v("glibc")]),t._v(" to redirect network connections into your proxies.")]),t._v(" "),a("p",[t._v("First, you should install "),a("code",[t._v("proxychains-ng")]),t._v(". Installation methods varies with each operating system, but the "),a("a",{attrs:{href:"https://github.com/rofl0r/proxychains-ng",target:"_blank",rel:"noopener noreferrer"}},[t._v("official repository"),a("OutboundLink")],1),t._v(" shall give you an instruction.")]),t._v(" "),a("p",[t._v("Edit "),a("code",[t._v("/etc/proxychains.conf")]),t._v(" (for global proxychains) or "),a("code",[t._v("$HOME/.proxychains/proxychains.conf")]),t._v(" (for user), edit "),a("code",[t._v("[ProxyList]")]),t._v(" section and change the proxy to SOCKS5 Proxy in Qv2ray:")]),t._v(" "),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("[ProxyList]")]),t._v("\nsocks5  127.0.0.1  1088\n")])])]),a("p",[t._v("After configuring "),a("code",[t._v("proxychains")]),t._v(", you may use "),a("code",[t._v("proxychains <program>")]),t._v(" in terminal to make "),a("code",[t._v("proxychains")]),t._v(" hijack the program to use the given proxy. If you are fed up with the noisy output, you may append "),a("code",[t._v("-q")]),t._v(" option after "),a("code",[t._v("proxychains")]),t._v(".")]),t._v(" "),a("p",[t._v("One thing to note is that "),a("code",[t._v("proxychains")]),t._v(" does not work with statically-linked programs, for example, Golang programs.")])])}),[],!1,null,null,null);e.default=o.exports}}]);